---
title: Guia de MigraÃ§Ã£o
---

# Guia de MigraÃ§Ã£o

## Migrando RainbowKit

### 1.x.x AlteraÃ§Ãµes que quebram

The [wagmi](https://wagmi.sh) and [viem](https://viem.sh) peer dependencies have reached `2.x.x` with breaking changes.

Siga as etapas abaixo para migrar.

**1. Atualize o RainbowKit e `wagmi` para suas Ãºltimas versÃµes**

```bash
npm i @rainbow-me/rainbowkit@2 wagmi@2 viem@2.x
```

**2. Instale a dependÃªncia de par `viem`**

Com o Wagmi v2, [TanStack Query](https://tanstack.com/query/v5/docs/react/overview) agora Ã© uma dependÃªncia paralela obrigatÃ³ria.

Instale-o com o seguinte comando:

```bash
npm i @tanstack/react-query
```

**3. Garanta a compatibilidade do empacotador e do polyfill**

```diff
  import '@rainbow-me/rainbowkit/styles.css'

+ import { QueryClient, QueryClientProvider } from '@tanstack/react-query'
- import { createPublicClient, http } from 'viem'
- import { WagmiConfig } from 'wagmi'
+ import { WagmiProvider, http } from 'wagmi'
- import { configureChains, createConfig } from 'wagmi'
  import { mainnet } from 'wagmi/chains'
  import { RainbowKitProvider } from '@rainbow-me/rainbowkit'
- import { getDefaultWallets, connectorsForWallets } from '@rainbow-me/rainbowkit'
+ import { getDefaultConfig } from '@rainbow-me/rainbowkit'

  /* getDefaultWallets is now optional */
- const { wallets } = getDefaultWallets({
-   appName: 'RainbowKit demo',
-   projectId: 'YOUR_PROJECT_ID',
-   chains,
- })

  /* connectorsForWallets is now optional */
- const connectors = connectorsForWallets([...wallets])

- const { chains, publicClient } = configureChains( 
-   [mainnet, sepolia], 
-   [publicProvider(), publicProvider()],
- )

- const config = createConfig({
-   autoConnect: true,
-   publicClient,
- })

  /* New API that includes Wagmi's createConfig and replaces getDefaultWallets and connectorsForWallets */
+ const config = getDefaultConfig({
+   appName: 'RainbowKit demo',
+   projectId: 'YOUR_PROJECT_ID',
+   chains: [mainnet],
+   transports: {
+     [mainnet.id]: http(),
+   },
+ })

+ const queryClient = new QueryClient()

  const App = () => {
    return (
-     <WagmiConfig config={config}>
+     <WagmiProvider config={config}>
+       <QueryClientProvider client={queryClient}>
-         <RainbowKitProvider chains={chains}>
+         <RainbowKitProvider>
            {/* Your App */}
          </RainbowKitProvider>
+       </QueryClientProvider>
-     </WagmiConfig>
+     </WagmiProvider>
    )
  }
```

**4. Verifique as alteraÃ§Ãµes que quebram a compatibilidade em `wagmi`**

Se vocÃª usa hooks `wagmi` em seu aplicativo, vocÃª precisarÃ¡ seguir o guia de migraÃ§Ã£o `wagmi` para a v1.

-   [Guia de MigraÃ§Ã£o do Wagmi v2](https://wagmi.sh/react/guides/migrate-from-v1-to-v2)
-   [MudanÃ§as que Quebram a Compatibilidade no Viem v2](https://viem.sh/docs/migration-guide.html#_2-x-x-breaking-changes)

#### RainbowKit Changes

**1. Improved behavior for EIP-6963 wallets**

Wallets that support the new EIP-6963 connection standard (including Rainbow, MetaMask, and more) will now automatically appear in an `Installed` section during the Connect Wallet experience. This ensures that users can always find their favorite wallets and connect to dApps without conflicts or fallback buttons.

Developers continue to have full control over the Custom Wallet List to emphasize preferred wallets for end users. It is encouraged that you continue to include the `injectedWallet` and `walletConnectWallet` in your list to supports all platforms.

2.  Substitua import configureChains

This new API simplifies the configuration experience and replaces the need to use Wagmi's `createConfig` directly. Chain configuration is simplified, including inferred public providers for `transports`.

The default wallet list will be automatically included, deprecating the need to use `getDefaultWallets` and `connectorsForWallets`.

You can create a Custom Wallet List by passing imported or Custom Wallet connectors to `wallets`. Instantiating wallet connectors and passing `projectId` and `chains` is no longer required.

```
const config = getDefaultConfig({
  appName: 'RainbowKit demo',
  projectId: 'YOUR_PROJECT_ID',
  chains: [mainnet],
  wallets: [rainbowWallet], /* optional custom wallet list */
  /* Wagmi createConfig options including `transports` are also accepted /*
})
```

**3. RainbowKitProvider**

You no longer need to pass `chains` to `<RainbowKitProvider>`.

```diff
- <RainbowKitProvider chains={chains}>
+ <RainbowKitProvider>
```

**4. Custom Chains**

The `Chain` type has changed in accordance with Wagmi v2, and continues to support RainbowKit's `iconUrl` and `iconBackground` metadata.

```diff
+ import { Chain } from '@rainbow-me/rainbowkit'

  const avalanche = {
    id: 43_114,
    name: 'Avalanche',
    iconUrl: 'https://s2.coinmarketcap.com/static/img/coins/64x64/5805.png',
    iconBackground: '#fff',
    nativeCurrency: { name: 'Avalanche', symbol: 'AVAX', decimals: 18 },
    rpcUrls: {
      default: { http: ['https://api.avax.network/ext/bc/C/rpc'] },
    },
    blockExplorers: {
      default: { name: 'SnowTrace', url: 'https://snowtrace.io' },
    },
    contracts: {
      multicall3: {
        address: '0xca11bde05977b3631167028862be2a173976ca11',
        blockCreated: 11_907_934,
      },
    },
  } as const satisfies Chain
```

Example with `getDefaultConfig`:

```diff
const config = getDefaultConfig({
+ chains: [
+   avalanche, /* custom chain */
+   {
+     ...mainnet,
+     iconBackground: '#000',
+     iconUrl: 'https://example.com/icons/ethereum.png',
+   }, /* metadata overides */
+ ],
});
```

Example with `createConfig`:

```diff
+ import { Chain } from '@rainbow-me/rainbowkit'
+ const chains: readonly [Chain, ...Chain[]] = [
+   {
+     ...mainnet,
+     iconBackground: '#000',
+     iconUrl: 'https://example.com/icons/ethereum.png',
+   },
+ ];
  const config = createConfig({
    chains,
    transports: {
      [mainnet.id]: http(),
    },
  })
```

**5. Custom Wallets**

O RainbowKit adotou o conector `WalletConnectLegacyConnector` em `wagmi` para manter o suporte Ã  WalletConnect v1. O suporte para WalletConnect v2 e `WalletConnectConnector` estarÃ¡ disponÃ­vel em breve como uma atualizaÃ§Ã£o de correÃ§Ã£o, sem quebras de compatibilidade.

Wallet connectors also now support the EIP-6963 standard with the `rdns` prop. Ensure that this is populated to prevent duplicate references to EIP-6963 supporting wallets in your wallet list.

### 1.x.x AlteraÃ§Ãµes que quebram

#### Atualizado para wagmi v1

A dependÃªncia de pares wagmi foi atualizada para `0.10.x`.

Siga os passos abaixo para migrar.

1.  Atualize RainbowKit e `wagmi` para suas Ãºltimas versÃµes

```bash
npm i @rainbow-me/rainbowkit@^1 wagmi@^1
```

**2. Instale a dependÃªncia de par `viem`**

wagmi v1 requer a dependÃªncia de par `viem`. Instale-o com o seguinte comando:

```bash
npm i viem
```

Nota: wagmi nÃ£o usa mais o pacote `ethers` internamente. Mas se vocÃª confia na API [Authentication](https://www.rainbowkit.com/docs/authentication), `siwe` ainda exigirÃ¡ `ethers` como uma dependÃªncia de pares.

**3. Garanta a compatibilidade do empacotador e do polyfill**

Nas versÃµes anteriores de wagmi que dependiam de [ethers](https://docs.ethers.org/v5/), os mÃ³dulos `fs`, `net` e `tls` necessÃ¡rios pelo WalletConnect eram automaticamente polyfilled. Isso nÃ£o acontece mais com RainbowKit v1 + wagmi v1, que sÃ£o construÃ­dos com base em [viem](https://viem.sh/).

Consulte a nossa [ConfiguraÃ§Ã£o de Webpack do Next.js](https://github.com/rainbow-me/rainbowkit/blob/main/examples/with-next/next.config.js) e amostras de [Polyfills do Create React App](https://github.com/rainbow-me/rainbowkit/blob/main/examples/with-create-react-app/src/polyfills.ts) para orientaÃ§Ãµes de configuraÃ§Ã£o para o seu projeto.

Guias adicionais do framework para Vite e Remix estÃ£o disponÃ­veis [here](https://www.rainbowkit.com/docs/installation#additional-build-tooling-setup).

2.  Verifique se hÃ¡ alteraÃ§Ãµes que quebram em `wagmi`

Se vocÃª usa hooks `wagmi` em sua aplicaÃ§Ã£o, vocÃª precisarÃ¡ verificar se sua aplicaÃ§Ã£o foi afetada pelas alteraÃ§Ãµes que quebram em `wagmi`.

[VocÃª pode ver o guia de migraÃ§Ã£o deles aqui](https://wagmi.sh/react/migration-guide#09x-breaking-changes).

### 0.8.x AlteraÃ§Ãµes que quebram

A dependÃªncia paritÃ¡ria wagmi foi atualizada para `0.8.x`.

O RainbowKit adotou o conector `WalletConnectLegacyConnector` em `wagmi` para manter o suporte Ã  WalletConnect v1. O suporte para WalletConnect v2 e `WalletConnectConnector` estarÃ¡ disponÃ­vel em breve como uma atualizaÃ§Ã£o de correÃ§Ã£o, sem quebras de compatibilidade.

As carteiras serÃ£o transicionadas automaticamente nas futuras ediÃ§Ãµes.

Cada dApp deve agora fornecer um [WalletConnect Cloud](https://cloud.walletconnect.com/) `projectId` para habilitar WalletConnect v2. Isso deve ser concluÃ­do antes que os servidores de ponte WalletConnect v1 sejam desativados em 28 de junho de 2023. RainbowKit preferirÃ¡ silenciosamente v1 para todas as carteiras se `projectId` nÃ£o for especificado.

Siga os passos abaixo para migrar.

#### 1.  Atualize RainbowKit e `wagmi` para a versÃ£o mais recente

```bash
npm i @rainbow-me/rainbowkit@^0.12.0 wagmi@^0.12.0
```

#### 2.  ForneÃ§a um projectId do WalletConnect Cloud

Cada dApp que depende de WalletConnect agora precisa obter um `projectId` do [WalletConnect Cloud](https://cloud.walletconnect.com/). Isso Ã© absolutamente gratuito e leva apenas alguns minutos.

ForneÃ§a o `projectId` para `getDefaultWallets` e conectores individuais de carteira RainbowKit como o seguinte:

```ts
const projectId = 'YOUR_PROJECT_ID';

const { wallets } = getDefaultWallets({
  appName: 'My RainbowKit App',
  projectId,
  chains,
});

const connectors = connectorsForWallets([
  ...wallets,
  {
    groupName: 'Other',
    wallets: [
      argentWallet({ projectId, chains }),
      trustWallet({ projectId, chains }),
      ledgerWallet({ projectId, chains }),
    ],
  },
]);
```

### AlteraÃ§Ãµes que quebram a versÃ£o 0.11.x

A dependÃªncia de pares wagmi foi atualizada para `0.11.x`.

Siga as etapas abaixo para migrar.

#### 1.  Atualize RainbowKit e `wagmi` para a versÃ£o mais recente

```bash
npm i @rainbow-me/rainbowkit@^0.11.0 wagmi@^0.11.0
```

#### 2.  Verifique se hÃ¡ alteraÃ§Ãµes que quebram em `wagmi`

Se vocÃª usa os ganchos `wagmi` em sua aplicaÃ§Ã£o, precisarÃ¡ verificar se sua aplicaÃ§Ã£o foi afetada pelas alteraÃ§Ãµes que quebram a compatibilidade em `wagmi`.

[VocÃª pode ver o guia de migraÃ§Ã£o deles aqui](https://wagmi.sh/react/migration-guide#011x-breaking-changes).

### AlteraÃ§Ãµes que quebram a versÃ£o 0.10.x

A dependÃªncia de peer do wagmi foi atualizada para `0.12.x`.

Siga as etapas abaixo para migrar.

#### 1.  Atualize RainbowKit e `wagmi` para a versÃ£o mais recente

```bash
npm i @rainbow-me/rainbowkit@^0.10.0 wagmi@^0.10.0
```

#### 2.  Verifique se hÃ¡ alteraÃ§Ãµes que quebram em `wagmi`

Se vocÃª usa ganchos `wagmi` em sua aplicaÃ§Ã£o, precisarÃ¡ verificar se sua aplicaÃ§Ã£o foi afetada pelas alteraÃ§Ãµes que quebram em `wagmi`.

[VocÃª pode ver o guia de migraÃ§Ã£o deles aqui](https://wagmi.sh/react/migration-guide#010x-breaking-changes).

### AlteraÃ§Ãµes que quebram a compatibilidade em 0.9.x

A dependÃªncia par a par do wagmi foi atualizada para `0.9.x`.

Siga as etapas abaixo para migrar.

#### 1.  Atualize RainbowKit e `wagmi` para suas versÃµes mais recentes

```bash
npm i @rainbow-me/rainbowkit@^0.9.0 wagmi@^0.9.0
```

#### 2.  Verifique as alteraÃ§Ãµes que quebram a compatibilidade em `wagmi`

Se vocÃª usa os hooks `wagmi` em seu aplicativo, vocÃª precisarÃ¡ verificar se seu aplicativo foi afetado pelas alteraÃ§Ãµes que quebram a compatibilidade no `wagmi`.

[VocÃª pode ver o guia de migraÃ§Ã£o deles aqui](https://wagmi.sh/react/migration-guide).

### AlteraÃ§Ãµes de compatibilidade da versÃ£o 0.12.x

A dependÃªncia de par [wagmi](https://wagmi.sh) foi atualizada para `1.x.x`.

Siga as etapas abaixo para migrar.

#### 1.  Atualize as dependÃªncias

```bash
npm i @rainbow-me/rainbowkit@^0.8.0 wagmi@^0.8.0
```

#### 2.  Verifique se hÃ¡ alteraÃ§Ãµes que quebram a compatibilidade no `wagmi`

Se vocÃª usa ganchos `wagmi` em sua aplicaÃ§Ã£o, precisarÃ¡ verificar se sua aplicaÃ§Ã£o foi afetada pelas alteraÃ§Ãµes que quebram em `wagmi`.

[VocÃª pode ver o guia de migraÃ§Ã£o aqui](https://wagmi.sh/react/migration-guide#08x-breaking-changes).

### 0.7.x MudanÃ§as significativas

Se vocÃª estÃ¡ criando uma lista de carteiras personalizada, agora deve importar cada carteira individualmente para reduzir o tamanho do pacote. Observe que, como as carteiras nÃ£o sÃ£o mais namespace via o objeto `wallet`, todas as carteiras agora tÃªm um sufixo `Wallet`.

```diff
-import { connectorsForWallets, wallet } from '@rainbow-me/rainbowkit';
+import { connectorsForWallets } from '@rainbow-me/rainbowkit';
+import {
+  injectedWallet,
+  rainbowWallet,
+  metaMaskWallet,
+  coinbaseWallet,
+  walletConnectWallet,
+} from '@rainbow-me/rainbowkit/wallets';

const wallets = [
-  wallet.injected({ chains }),
-  wallet.rainbow({ chains }),
-  wallet.metaMask({ chains }),
-  wallet.coinbase({ chains, appName: 'My App' }),
-  wallet.walletConnect({ chains }),
+  injectedWallet({ chains }),
+  rainbowWallet({ chains }),
+  metaMaskWallet({ chains }),
+  coinbaseWallet({ chains, appName: 'My App' }),
+  walletConnectWallet({ chains }),
];
```

TambÃ©m observe que a camada de compatibilidade retroativa do Steakwallet foi removida. O Omni deve ser usado em vez disso.

```diff
-import { wallet } from '@rainbow-me/rainbowkit';
+import { omniWallet } from '@rainbow-me/rainbowkit/wallets';

const wallets = [
-  wallet.steak({ chains }),
+  omniWallet({ chains }),
];
```

### 0.4.x MudanÃ§as significativas

O RainbowKit atualizou a dependÃªncia de pares `wagmi` para `0.5.x`.

Siga as etapas abaixo para migrar.

#### 1.  Atualizar dependÃªncias

Atualize RainbowKit e wagmi para a versÃ£o mais recente

```bash
npm i @rainbow-me/rainbowkit@^0.4.0 wagmi@^0.5.0
```

#### 4.  Renomeie o provedor do wagmi

Se vocÃª usa hooks `wagmi` em sua aplicaÃ§Ã£o, vocÃª precisarÃ¡ verificar se sua aplicaÃ§Ã£o foi afetada pelas alteraÃ§Ãµes que quebram em `wagmi`.

[VocÃª pode ver o guia de migraÃ§Ã£o aqui](https://wagmi.sh/react/migration-guide#05x-breaking-changes).

### 0.3.x AlteraÃ§Ãµes que quebram a compatibilidade

Removido o parÃ¢metro `chainId` de `createConnector` no tipo `Wallet`.

**Observe que todas as carteiras integradas estÃ£o usando a nova API. A maioria dos consumidores nÃ£o serÃ¡ afetada. Esta alteraÃ§Ã£o afeta apenas os consumidores que criaram/consumiram [carteiras personalizadas](/docs/custom-wallets).**

Se vocÃª anteriormente derivou URLs de RPC do `chainId` no `createConnector`, agora vocÃª pode remover essa lÃ³gica pois o `wagmi` agora lida internamente com as URLs de RPC quando utilizado com `configureChains`.

```diff
import { connectorsForWallets, wallet, Chain, Wallet } from '@rainbow-me/rainbowkit';
import { chain, configureChains } from 'wagmi';
import { alchemyProvider } from 'wagmi/providers/alchemy';
import { publicProvider } from 'wagmi/providers/public';
import { WalletConnectConnector } from 'wagmi/connectors/walletConnect';

export interface MyWalletOptions {
  chains: Chain[];
}

-const chains = [chain.mainnet]
+const { chains } = configureChains(
+  [chain.mainnet],
+  [
+    alchemyProvider({ alchemyId: process.env.ALCHEMY_ID }),
+    publicProvider(),
+  ]
+);

export const rainbow = ({ chains }: MyWalletOptions): Wallet => ({
  ...
- createConnector: ({ chainId }) => {
+ createConnector: () => {
-   const rpc = chains.reduce(
-     (rpcUrlMap, chain) => ({
-       ...rpcUrlMap,
-       [chainId]: chain.rpcUrls.default,
-     }),
-     {}
-   );
    const connector = new WalletConnectConnector({
      chains,
      options: {
        qrcode: false,
-       rpc,
      },
    });
  }
  ...
}

const connectors = connectorsForWallets([
  {
    groupName: 'Recommended',
    wallets: [
      rainbow({ chains }),
    ],
  },
]);
```

### AlteraÃ§Ãµes que quebram a versÃ£o 0.2.x

O RainbowKit atualizou a dependÃªncia de pares `wagmi` para `^0.4`.

Siga os passos abaixo para migrar.

#### 1.  Atualizar dependÃªncias

Atualize RainbowKit e wagmi para a versÃ£o mais recente

```bash
npm i @rainbow-me/rainbowkit@^0.2.0 wagmi@^0.4.2
```

#### 2.  Substitua import configureChains

Importe `configureChains` do wagmi, em vez do RainbowKit:

```diff
- import { configureChains } from '@rainbow-me/rainbowkit';
+ import { configureChains } from 'wagmi';
```

#### 3.  Migre os provedores

RainbowKit nÃ£o exporta mais uma API `apiProvider`. Substitua-o pelo provedor desejado do wagmi.

```diff
- import { apiProvider } from '@rainbow-me/rainbowkit';
```

#### Alchemy

Importe `alchemyProvider` de `wagmi/providers/alchemy`.

```diff
+ import { alchemyProvider } from 'wagmi/providers/alchemy';

const { chains, provider } = configureChains(
  [chain.mainnet, chain.polygon, chain.optimism, chain.arbitrum],
- [apiProvider.alchemy(process.env.ALCHEMY_ID)]
+ [alchemyProvider({ alchemyId: process.env.ALCHEMY_ID })]
);
```

#### Infura

Importe `infuraProvider` de `wagmi/providers/infura`.

```diff
+import { infuraProvider } from 'wagmi/providers/infura';

const { chains, provider } = configureChains(
  [chain.mainnet, chain.polygon, chain.optimism, chain.arbitrum],
- [apiProvider.infura(process.env.INFURA_ID)]
+ [infuraProvider({ infuraId: process.env.INFURA_ID })]
);
```

#### JSON RPC

Importe `jsonRpcProvider` de `wagmi/providers/jsonRpc`.

```diff
+ import { jsonRpcProvider } from 'wagmi/providers/jsonRpc';

const { chains, provider } = configureChains(
  [chain.mainnet, chain.polygon],
  [
-   apiProvider.jsonRpc(chain => ({
-     rpcUrl: `https://${chain.id}.example.com`,
-   })),
+   jsonRpcProvider({
+     rpc: chain => ({
+       http: `https://${chain.id}.example.com`,
+     }),
+   }),
  ]
);
```

#### Provedor pÃºblico

Importe `publicProvider` de `wagmi/providers/public`.

```diff
+ import { publicProvider } from 'wagmi/providers/public';

const { chains, provider } = configureChains(
  [chain.mainnet, chain.polygon],
- [apiProvider.fallback()]
+ [publicProvider()]
);
```

#### 4.  Renomeie o provedor do wagmi

Renomeie `WagmiProvider` para `WagmiConfig`.

```diff
import {
- WagmiProvider
+ WagmiConfig
} from 'wagmi'

const App = () => {
  return (
-   <WagmiProvider client={wagmiClient}>...</WagmiProvider>
+   <WagmiConfig client={wagmiClient}>...</WagmiConfig>
  );
};
```

E vocÃª terminou! ðŸŒˆ
